<?xml version="1.0" standalone="no"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
                    "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY FindBugs "<application>FindBugs</application>">
<!ENTITY Ant "<application>Ant</application>">
<!ENTITY Saxon "<application>Saxon</application>">
<!ENTITY FBHome "<replaceable>$FINDBUGS_HOME</replaceable>">
<!ENTITY nbsp "&#160;">
]>
 
<book lang="en" id="findbugs-manual">
 
<bookinfo>
<title>&FindBugs; Manual</title>

<authorgroup>
  <author>
    <firstname>David</firstname>
    <othername>H.</othername>
    <surname>Hovemeyer</surname>
  </author>
</authorgroup>

<copyright>
  <year>2003</year>
  <year>2004</year>
  <year>2005</year>
  <holder>University of Maryland</holder>
</copyright>

<legalnotice>
<para>
This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike License.
To view a copy of this license, visit
<ulink url="http://creativecommons.org/licenses/by-nc-sa/1.0/">http://creativecommons.org/licenses/by-nc-sa/1.0/</ulink>
or send a letter to Creative Commons, 559 Nathan Abbott Way, Stanford, California 94305, USA.
</para>
</legalnotice>

<edition>@VERSION@</edition>

<pubdate>@RELEASE_DATE@</pubdate>

</bookinfo>

<!--
   **************************************************************************
   Introduction
   **************************************************************************
-->
 
<chapter id="introduction">
<title>Introduction</title>

<para> &FindBugs; is a program to find bugs in Java programs.  It looks for instances
of "bug patterns" --- code instances that are likely to be errors.</para>

<para> This document describes version @VERSION@ of &FindBugs;. This is an
early release of the tool, so you may find problems with it. We
are very interested in getting your feedback on &FindBugs;. Please visit
the <ulink url="@WEBSITE@">&FindBugs; web page</ulink> for
the latest information on &FindBugs;, contact information, and support resources such
as information about the &FindBugs; mailing lists.</para>

<sect1>
<title>Requirements</title>
<para> To use &FindBugs;, you need a runtime environment compatible with
<ulink url="http://java.sun.com/j2se">Java 2 Standard Edition</ulink>, version 1.4.0 or later.
&FindBugs; is platform independent, and is known to run on GNU/Linux, Windows, and
MacOS X platforms.</para>

<para>You should have at least 256 MB of memory to use &FindBugs;.
To analyze very large projects, more memory may be needed.</para>
</sect1>
 
</chapter>

<!--
   **************************************************************************
   Installing FindBugs
   **************************************************************************
-->

<chapter id="installing">
<title>Installing and Running &FindBugs;</title>

<para>
This chapter explains how to install and run &FindBugs;.
</para>

<sect1>
<title>Extracting the Distribution</title>

<para>
The easiest way to install &FindBugs; is to download a binary distribution.
Binary distributions are available in
<ulink url="@DOWNLOADS_WEBSITE@/findbugs-@VERSION@.tar.gz?download">gzipped tar format</ulink> and
<ulink url="@DOWNLOADS_WEBSITE@/findbugs-@VERSION@.zip?download">zip format</ulink>.
Once you have downloaded a binary distribution, extract it into a directory of your choice.
</para>

<para>
Extracting a gzipped tar format distribution:
<screen>
<prompt>$ </prompt><command>gunzip -c findbugs-@VERSION@.tar.gz | tar xvf -</command>
</screen>
</para>

<para>
Extracting a zip format distribution:
<screen>
<prompt>C:\Software></prompt><command>unzip findbugs-@VERSION@.zip</command>
</screen>
</para>

<para>
Usually, extracting a binary distribution will create a directory ending in
<filename class="directory">findbugs-@VERSION@</filename>. For example, if you extracted
the binary distribution from the <filename class="directory">C:\Software</filename>
directory, then the &FindBugs; software will be extracted into the directory
<filename class="directory">C:\Software\findbugs-@VERSION@</filename>.
This directory is the &FindBugs; home directory.  We'll refer to it as
&FBHome; throughout this manual.
</para>
</sect1>

<sect1>
<title>Configuration</title>

<para>
Once you have extracted the binary distribution, all you need to do in order
to run &FindBugs; is to invoke the wrapper script.
</para>

<para>
On Unix-like systems, use the following command to invoke the wrapper script:
<screen>
<prompt>$ </prompt><command>&FBHome;/bin/findbugs <replaceable>options...</replaceable></command>
</screen>
</para>

<para>
On Windows systems, the command to invoke the wrapper script is 
<screen>
<prompt>C:\My Directory></prompt><command>&FBHome;\bin\findbugs.bat <replaceable>options...</replaceable></command>
</screen>
</para>

<para>
On both Unix-like and Windows systems, you can simply add the <filename><replaceable>$FINDBUGS_HOME</replaceable>/bin</filename>
directory to your <filename>PATH</filename> environment variable and then invoke
FindBugs using the <command>findbugs</command> command.
</para>

</sect1>

<sect1 id="commandLineOptions">
<title>Command Line Options</title>

<para>

There are two ways to invoke &FindBugs;.  The first invokes the the Graphical User Interface (GUI):

<screen>
<prompt>$ </prompt><command>findbugs <replaceable>[standard options]</replaceable> <replaceable>[GUI options]</replaceable></command>
</screen>

The second invokes the Command Line Interface (Text UI):

<screen>
<prompt>$ </prompt><command>findbugs -textui <replaceable>[standard options]</replaceable> <replaceable>[Text UI options]</replaceable></command>
</screen>
</para>

<sect2>
<title>Standard options</title>

<para>
These options may be used with both the GUI and Text UI.

<variablelist>
  <varlistentry>
    <term><command>-jvmArgs <replaceable>args</replaceable></command></term>
    <listitem>
       <para>
         Specifies arguments to pass to the JVM.  For example, you might want
         to set a JVM property:
<screen>
<prompt>$ </prompt><command>findbugs -textui -jvmArgs "-Duser.language=ja" <replaceable>myApp.jar</replaceable></command>
</screen>
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><command>-javahome <replaceable>directory</replaceable></command></term>
    <listitem>
      <para>
        Specifies the directory containing the JRE (Java Runtime Environment) to
        use to execute &FindBugs;.
      </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><command>-maxHeap <replaceable>size</replaceable></command></term>
    <listitem>
      <para>
      Specifies the maximum Java heap size in megabytes. The default is 256.
      More memory may be required to analyze very large programs or libraries.
      </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><command>-debug</command></term>
    <listitem>
      <para>
      Prints a trace of detectors run and classes analyzed to standard output.
      Useful for troubleshooting unexpected analysis failures.
      </para>
    </listitem>
  </varlistentry>
<!--
  <varlistentry>
    <term><command>-conserveSpace</command></term>
    <listitem>
      <para>
      This option disables analyses that increase precision but also
      increase memory consumption.  You may want to try this option if
      you find that &FindBugs; runs out of memory, or takes an unusually
      long time to complete its analysis.
      </para>
    </listitem>
  </varlistentry>
-->
  <varlistentry>
    <term><command>-effort:min</command></term>
    <listitem>
      <para>
      This option disables analyses that increase precision but also
      increase memory consumption.  You may want to try this option if
      you find that &FindBugs; runs out of memory, or takes an unusually
      long time to complete its analysis.
      </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><command>-effort:max</command></term>
    <listitem>
      <para>
		Enable analyses which increase precision and find more bugs, but which
		may require more memory and take more time to complete.
      </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><command>-property</command> <replaceable>name=value</replaceable></term>
    <listitem>
      <para>
      This option sets a system property.&nbsp; &FindBugs; uses system properties
      to configure analysis options.  See <xref linkend="analysisprops"/>.
      You can use this option multiple times in order to set multiple properties.
      Note: In most versions of Windows, the <replaceable>name=value</replaceable>
      string must be in quotes.
      </para>
    </listitem>
  </varlistentry>

  <varlistentry>
  <term><command>-project</command> <replaceable>project</replaceable></term>
  <listitem>
    <para>
    Specify a project to be analyzed.  The project file you specify should
    be one that was created using the GUI interface.  It will typically end
    in the extension <filename>.fb</filename>.
    </para>
  </listitem>
  </varlistentry>

</variablelist>
</para>

</sect2>

<sect2>
<title>GUI Options</title>

<para>
These options are only accepted by the Graphical User Interface.

<variablelist>
  <varlistentry>
    <term><command>-look:</command><replaceable>plastic|gtk|native</replaceable></term>
    <listitem>
       <para>
		Set Swing look and feel.
       </para>
    </listitem>
  </varlistentry>

</variablelist>
</para>
</sect2>

<sect2>
<title>Text UI Options</title>

<para>
These options are only accepted by the Text User Interface.

<variablelist>
  <varlistentry>
    <term><command>-sortByClass</command></term>
    <listitem>
       <para>
       Sort reported bug instances by class name.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><command >-include</command> <replaceable>filterFile.xml</replaceable></term>
    <listitem>
       <para>
       Only report bug instances that match the filter specified by <replaceable>filterFile.xml</replaceable>.
       See <xref linkend="filter" />.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><command >-exclude</command> <replaceable>filterFile.xml</replaceable></term>
    <listitem>
       <para>
       Report all bug instances except those matching the filter specified by <replaceable>filterFile.xml</replaceable>.
       See <xref linkend="filter" />.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><command>-onlyAnalyze</command> <replaceable>com.foobar.MyClass,com.foobar.mypkg.*</replaceable></term>
    <listitem>
      <para>
      Restrict analysis to find bugs to given comma-separated list of 
      classes and packages.
      Unlike filtering, this option avoids running analysis on
      classes and packages that are not explicitly matched:
      for large projects, this may greatly reduce the amount of time
      needed to run the analysis.  (However, some detectors may produce
      inaccurate results if they aren't run on the entire application.)
      Classes should be specified using their full classnames (including
      package), and packages should be specified in the same way
      they would in a Java <literal>import</literal> statement to
      import all classes in the package (i.e., add <literal>.*</literal>
      to the full name of the package.)
      </para>
    </listitem>
  </varlistentry>

  <varlistentry>
  <term><command>-low</command></term>
  <listitem>
    <para>
    Report all bugs.
    </para>
  </listitem>
  </varlistentry>

  <varlistentry>
  <term><command>-medium</command></term>
  <listitem>
    <para>
    Report medium and high priority bugs.  This is the default setting.
    </para>
  </listitem>
  </varlistentry>

  <varlistentry>
  <term><command>-high</command></term>
  <listitem>
    <para>
    Report only high priority bugs.
    </para>
  </listitem>
  </varlistentry>
  
  <varlistentry>
	<term><command>-relaxed</command></term>
	<listitem>
		<para>
			Relaxed reporting mode.  For many detectors, this option
			suppresses the heuristics used to avoid reporting false positives.
		</para>
	</listitem>
  </varlistentry>

  <varlistentry>
  <term><command>-xml</command></term>
  <listitem>
    <para>
    Produce the bug reports as XML.  The XML data produced may be
    viewed in the GUI at a later time.  You may also specify this
    option as <command>-xml:withMessages</command>; when this variant
    of the option is used, the XML output will contain human-readable
    messages describing the warnings contained in the file.
    XML files generated this way are easy to transform into reports.
    </para>
  </listitem>
  </varlistentry>

  <varlistentry>
  <term><command>-html</command></term>
  <listitem>
    <para>
    Generate HTML output.  By default, &FindBugs; will use the <filename>default.xsl</filename>
    <ulink url="http://www.w3.org/TR/xslt">XSLT</ulink>
    stylesheet to generate the HTML: you can find this file in <filename>findbugs.jar</filename>,
    or in the &FindBugs; source or binary distributions.  Variants of this option include
	<command>-html:plain.xsl</command> and <command>-html:fancy.xsl</command>.
	The <filename>plain.xsl</filename> stylesheet does not use Javascript or DOM,
	and may work better with older web browsers, or for printing.  The <filename>fancy.xsl</filename>
	stylesheet makes extensive use of DOM and Javascript for navigation and CSS for
	visual presentation.
	</para>		
		
	<para>
  	If you want to specify your own
    XSLT stylesheet to perform the transformation to HTML, specify the option as
    <command>-html:<replaceable>myStylesheet.xsl</replaceable></command>,
    where <replaceable>myStylesheet.xsl</replaceable> is the filename of the
    stylesheet you want to use.
    </para>
  </listitem>
  </varlistentry>

  <varlistentry>
  <term><command>-emacs</command></term>
  <listitem>
    <para>
    Produce the bug reports in Emacs format.
    </para>
  </listitem>
  </varlistentry>

  <varlistentry>
  <term><command>-auxclasspath</command> <replaceable>classpath</replaceable></term>
  <listitem>
    <para>
    Set the auxiliary classpath for analysis.  This classpath should include all
    jar files and directories containing classes that are part of the program
    being analyzed but you do not want to have analyzed for bugs.
    </para>
  </listitem>
  </varlistentry>

<!--
  <varlistentry>
  <term><command></command> <replaceable></replaceable></term>
  <listitem>
    <para>
    </para>
  </listitem>
  </varlistentry>
-->

</variablelist>
</para>

</sect2>

</sect1>

</chapter>

<!--
   **************************************************************************
   Compiling FindBugs from Source
   **************************************************************************
-->

<chapter id="building">
<title>Building &FindBugs; from Source</title>

<para>
This chapter describes how to build &FindBugs; from source code.  Unless you are
interesting in modifying &FindBugs;, you will probably want to skip to the
<link linkend="gui">next chapter</link>.
</para>

<sect1>
<title>Prerequisites</title>

<para>
To compile &FindBugs; from source, you will need the following:
<itemizedlist>
  <listitem>
    <para>
      The <ulink url="@DOWNLOADS_WEBSITE@/findbugs-@VERSION@-source.zip?download"
      >&FindBugs; source distribution</ulink>
    </para>
  </listitem>
  <listitem>
    <para>
      <ulink url="http://java.sun.com/j2se/">JDK 1.5.0 beta or later</ulink>
    </para>
  </listitem>
  <listitem>
    <para>
      <ulink url="http://ant.apache.org/">Apache &Ant;</ulink>, version 1.5 or later
    </para>
  </listitem>
</itemizedlist>
</para>

<warning>
	<para>
		The version of &Ant; included as <filename>/usr/bin/ant</filename> on
		Redhat Linux systems will <emphasis>not</emphasis> work for compiling
		&FindBugs;.  We recommend you install a binary distribution of &Ant;
		downloaded from the <ulink url="http://ant.apache.org/">&Ant; website</ulink>.
		Make sure that when you run &Ant; your <replaceable>JAVA_HOME</replaceable>
		environment variable points to the directory in which you installed
		JDK 1.5 (or later).
	</para>
</warning>

<para>
If you want to be able to generate formatted versions of the &FindBugs; documentation,
you will also need the following software:
<itemizedlist>
  <listitem>
    <para>
    The <ulink url="http://docbook.sourceforge.net/projects/xsl/index.html">DocBook XSL Stylesheets</ulink>.
    These are required to convert the &FindBugs; manual into HTML and PDF formats.
    </para>
  </listitem>
  <listitem>
    <para>
      The <ulink url="http://saxon.sourceforge.net/">&Saxon; XSLT Processor</ulink>.
      The file <filename>saxon.jar</filename> should be in your <envar>CLASSPATH</envar>.
    </para>
  </listitem>
<!--
  <listitem>
    <para>
    </para>
  </listitem>
-->
</itemizedlist>
</para>

</sect1>

<sect1>
<title>Extracting the Source Distribution</title>
<para>
After you download the source distribution, you'll need to extract it into
a working directory.  A typical command to do this is:

<screen>
<prompt>$ </prompt><command>unzip findbugs-@VERSION@-source.zip</command>
</screen>

</para>
</sect1>

<sect1>
<title>Modifying <filename>build.properties</filename></title>
<para>
If you intend to build the FindBugs documentation,
you will need to modify the <filename>build.properties</filename> file
used by the <ulink url="http://ant.apache.org/">&Ant;</ulink>
<filename>build.xml</filename> file to build &FindBugs;.
If you do not want to build the FindBugs documentation, then you
can ignore this file.
</para>
	
<para>
The <filename>build.properties</filename> looks like this:
<programlisting>
<![CDATA[
# User Configuration:
# This section must be modified to reflect your system.

local.software.home     =/export/home/daveho/linux

# Set this to the directory containing the DocBook Modular XSL Stylesheets
#  from http://docbook.sourceforge.net/projects/xsl/

xsl.stylesheet.home     =${local.software.home}/docbook/docbook-xsl-1.61.0

# Set this to the directory where Saxon (http://saxon.sourceforge.net/)
# is installed. 

saxon.home              =${local.software.home}/java/saxon-6.5.2
]]>
</programlisting>
</para>

<para>
The <varname>xsl.stylesheet.home</varname> property specifies the full
path to the directory where you have installed the
<ulink url="http://docbook.sourceforge.net/projects/xsl/">DocBook Modular XSL
Stylesheets</ulink>.  You only need to specify this property if you will be
generating the &FindBugs; documentation.
</para>

<para>
The <varname>saxon.home</varname> property is the full path to the
directory where you installed the <ulink url="http://saxon.sourceforge.net/">&Saxon; XSLT Processor</ulink>.
You only need to specify this property if you will be
generating the &FindBugs; documentation.
</para>

</sect1>

<sect1>
<title>Running &Ant;</title>

<para>
Once you have extracted the source distribution,
made sure that &Ant; is installed,
modified <filename>build.properties</filename> (optional),
and configured the tools (such as &Saxon;),
you are ready to build &FindBugs;.  Invoking &Ant; is a simple matter
of running the command
<screen>
<prompt>$ </prompt><command>ant <replaceable>target</replaceable></command>
</screen>
where <replaceable>target</replaceable> is one of the following:
<variablelist>
  <varlistentry>
    <term><command>build</command></term>
    <listitem>
       <para>
         This target compiles the code for &FindBugs;. It is the default target.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><command>docs</command></term>
    <listitem>
       <para>
       This target formats the documentation.  (It also compiles some of
       the source code as a side-effect.)
       </para>
    </listitem>
  </varlistentry>
  
  <varlistentry>
	<term><command>runjunit</command></term>
	<listitem>
		<para>
			This target compiles and runs the internal JUnit tests included
			in &FindBugs;.  It will print an error message if any unit
			tests fail.
		</para>
	</listitem>
  </varlistentry>
  
  <varlistentry>
	<term><command>bindist</command></term>
	<listitem>
		<para>
			Builds a binary distribution of &FindBugs;.
			The target creates both <filename>.zip</filename> and
			<filename>.tar.gz</filename> archives.
		</para>
	</listitem>
  </varlistentry>
</variablelist>
</para>

<para>
After running an &Ant; command, you should see output similar to
the following (after some other messages regarding the tasks that
&Ant; is running):
<screen>
<computeroutput>
BUILD SUCCESSFUL
Total time: 17 seconds
</computeroutput>
</screen>
</para>

</sect1>

<sect1>
<title>Running &FindBugs;</title>
<para>
The &Ant; build script for &FindBugs; is set up such that after 
building the <command>build</command> target, the working directory
is set up just like a binary distribution.  So, the information about
installing a binary distribution of &FindBugs; in <xref linkend="installing" />
applies to source distributions, too.
</para>
</sect1>

</chapter>


<!--
   **************************************************************************
   Using the FindBugs Graphical Interface
   **************************************************************************
-->

<chapter id="gui">
<title>Using the Findbugs Graphical User Interface</title>

<para>
&FindBugs; has two user interfaces: a graphical user interface (GUI) and a
command line user interface.  This chapter describes the graphical user interface.
</para>

<!--
<sect1>
<title>Executing the &FindBugs; GUI</title>
</sect1>
-->

<sect1>
<title>Creating a Project</title>
<para>
After you have started &FindBugs; using the <command>findbugs</command> command,
choose the <menuchoice><guimenu>File</guimenu><guimenuitem>New Project</guimenuitem></menuchoice>
menu item.  You will see a dialog which looks like this:
<mediaobject>
<imageobject>
<imagedata fileref="project-dialog.png" />
</imageobject>
</mediaobject>
</para>

<para>
Use the "Browse" button next to the "Add archive or directory" text field to select a Java archive
file (zip, jar, ear, or war file) or directory containing java classes to analyze for bugs.  You may add multiple
archives/directories.
</para>

<para>
You can also add the source directories which contain
the source code for the Java archives you are analyzing.  This will enable
&FindBugs; to highlight the source code which contains a possible error.
The source directories you add should be the roots of the Java
package hierarchy.  For example, if your application is contained in the
<varname>org.foobar.myapp</varname> package, you should add the
parent directory of the <filename class="directory">org</filename> directory
to the source directory list for the project.
</para>

<para>
Another optional step is to add additional Jar files or directories as
classpath entries.  You should do this if the archives and directories you are analyzing
have references to other classes which are not included in the analyzed
archives/directories and are not in the standard runtime classpath.  Some of the bug
pattern detectors in &FindBugs; make use of class hierarchy information,
so you will get more accurate results if the entire class hierarchy is
available which &FindBugs; performs its analysis.
</para>

</sect1>

<sect1>
<title>Running the Analysis</title>
<para>
Once you have added all of the archives, directories, and source directories,
click the "Find Bugs!" button to analyze the classes contained in the
Jar files.  Note that for a very large program on an older computer,
this may take quite a while (tens of minutes).  A recent computer with
ample memory will typically be able to analyze a large program in only a
few minutes.
</para>
</sect1>

<sect1>
<title>Browsing Results</title>

<para>
When the analysis completes, you will see a screen like the following:
<mediaobject>
  <imageobject>
    <imagedata fileref="example-details.png" />
  </imageobject>
</mediaobject>
</para>

<para>
The top pane of the window shows the bug tree; this is a hierarchical
representation of all of the potential bugs detected in the analyzed
Jar files.  The tabs allow you to browse by class, package, or bug type.
</para>

<para>
When you select a particular bug instance in the top pane, you will
see a description of the bug in the "Details" tab of the bottom pane.
In addition, the "Source code" tab of the bottom pane will, for some
kinds of bugs, show the program source code where the potential bug occurs.
In the above example, the bug is an access to an uninitialized field in
a constructor.  The source code window highlights the line containing
the problematic access.
</para>

<para>
You may add a textual annotations to bug instances.  To do so, choose the
"Annotations" tab in the bottom pane.  Simply type in any information which
you would like to record.  When you load and save bug results files,
the annotations are preserved.
</para>

<para>
You may use the <menuchoice><guimenu>File</guimenu><guimenuitem>Save project</guimenuitem></menuchoice>
menu option to save the current lists
of Jar files and source directories.  A saved project may be loaded with
the <menuchoice><guimenu>File</guimenu><guimenuitem>Open project</guimenuitem></menuchoice> menu option.
Note that when you save a project, the analysis results are
not saved.
</para>

</sect1>

<sect1>
<title>Loading and saving results</title>

<para>
You may use the <menuchoice><guimenu>File</guimenu><guimenuitem>Load bugs</guimenuitem></menuchoice>
and <menuchoice><guimenu>File</guimenu><guimenuitem>Save bugs</guimenuitem></menuchoice> to load
and save the bug results produced by running &FindBugs; on your project.  The results are
saved in XML format.  Any annotations you have added to bug reports are saved in the
resulting XML file.
</para>

<note>
<title>Planned Features</title>
<para>
Support for loading and saving bugs is still under development.
You may find bugs in this feature, and the file format and/or implementation
may change in future releases.
</para>
</note>

</sect1>

</chapter>



<!--
   **************************************************************************
   Using the FindBugs Command Line Interface
   **************************************************************************
-->

<chapter id="textui">
<title>Using the &FindBugs; Command Line Interface</title>

<para>
The &FindBugs; Command Line Interface (or Text UI) can be used to
analyze an application for bugs non-interactively.  Each bug instance will be
reported on a single line.  All output is written to the standard output file descriptor.
<xref linkend="filter" /> explains how bug reports may be filtered in order
to get only the output you're interested in.
</para>

<para>
See <xref linkend="commandLineOptions" /> in <xref linkend="installing" /> for a description of how to invoke the
Command Line Interface.
</para>

</chapter>


<!--
   **************************************************************************
   Using the FindBugs Ant task
   **************************************************************************
-->

<chapter id="anttask">
<title>Using the &FindBugs; &Ant; task</title>

<para>
This chapter describes how to integrate &FindBugs; into a build script
for <ulink url="http://ant.apache.org/">&Ant;</ulink>, which is a popular Java build
and deployment tool.  Using the &FindBugs; &Ant; task, your build script can
automatically run &FindBugs; on your Java code.
</para>

<para>
The &Ant; task was generously contributed by Mike Fagan.
</para>

<sect1>
<title>Installing the &Ant; task</title>

<para>
To install the &Ant; task, simply copy <filename>&FBHome;/lib/findbugs-ant.jar</filename>
into the <filename>lib</filename> subdirectory of your &Ant; installation.

<note>
<para>It is strongly recommended that you use the &Ant; task with the version
of &FindBugs; it was included with.  We do not guarantee that the &Ant; task Jar file
will work with any version of &FindBugs; other than the one it was included with.</para>
</note>
</para>

</sect1>

<sect1>
<title>Modifying build.xml</title>

<para>
To incorporate &FindBugs; into <filename>build.xml</filename> (the build script
for &Ant;), you first need to add a task definition.  This should appear as follows:

<screen>
  &lt;taskdef name="findbugs" classname="edu.umd.cs.findbugs.anttask.FindBugsTask"/&gt;
</screen>

The task definition specifies that when a <literal>findbugs</literal> element is
seen in <filename>build.xml</filename>, it should use the indicated class to execute the task.
</para>

<para>
After you have added the task definition, you can define a target
which uses the <literal>findbugs</literal> task.  Here is an example
which could be added to the <filename>build.xml</filename> for the
Apache <ulink url="http://jakarta.apache.org/bcel/">BCEL</ulink> library.

<screen>
  &lt;property name="findbugs.home" value="/export/home/daveho/work/findbugs" /&gt;

  &lt;target name="findbugs" depends="jar"&gt;
    &lt;findbugs home="${findbugs.home}"
              output="xml"
              outputFile="bcel-fb.xml" &gt;
      &lt;auxClasspath path="${basedir}/lib/Regex.jar" /&gt;
      &lt;sourcePath path="${basedir}/src/java" /&gt;
      &lt;class location="${basedir}/bin/bcel.jar" /&gt;
    &lt;/findbugs&gt;
  &lt;/target&gt;
</screen>

The <literal>findbugs</literal> element must have the <literal>home</literal>
attribute set to the directory in which &FindBugs; is installed; in other words,
&FBHome;.  See <xref linkend="installing" />.
</para>

<para>
This target will execute &FindBugs; on <filename>bcel.jar</filename>, which is the
Jar file produced by BCEL's build script.  (By making it depend on the "jar"
target, we ensure that the library is fully compiled before running &FindBugs; on it.)
The output of &FindBugs; will be saved in XML format to a file called
<filename>bcel-fb.xml</filename>.
An auxiliary Jar file, <filename>Regex.jar</filename>, is added to the aux classpath,
because it is referenced by the main BCEL library.  A source path is specified
so that the saved bug data will have accurate references to the BCEL source code.
</para>
</sect1>

<sect1>
<title>Executing the task</title>

<para>
Here is an example of invoking &Ant; from the command line, using the <literal>findbugs</literal>
target defined above.

<screen>
  <prompt>[daveho@noir]$</prompt> <command>ant findbugs</command>
  Buildfile: build.xml
  
  init:
  
  compile:
  
  examples:
  
  jar:
  
  findbugs:
   [findbugs] Running FindBugs...
   [findbugs] Bugs were found
   [findbugs] Output saved to bcel-fb.xml
  
  BUILD SUCCESSFUL
  Total time: 35 seconds
</screen>

In this case, because we saved the bug results in an XML file, we can
use the &FindBugs; GUI to view the results; see <xref linkend="gui"/>.
</para>

</sect1>

<sect1>
<title>Parameters</title>

<para>This section describes the parameters that may be specified when
using the &FindBugs; task.

<variablelist>

  <varlistentry>
    <term><literal>class</literal></term>
    <listitem>
       <para>
       A nested element specifying which classes to analyze.  The <literal>class</literal>
       element must specify a <literal>location</literal> attribute which names the
       archive file (jar, zip, etc.), directory, or class file to be analyzed.  Multiple <literal>class</literal>
       elements may be specified as children of a single <literal>findbugs</literal> element.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>auxClasspath</literal></term>
    <listitem>
       <para>
       An optional nested element which specifies a classpath (Jar files or directories)
       containing classes used by the analyzed library or application, but which
       you don't want to analyze.  It is specified the same way as
       &Ant;'s <literal>classpath</literal> element for the Java task.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>sourcePath</literal></term>
    <listitem>
       <para>
       An optional nested element which specifies a source directory path
       containing source files used to compile the Java code being analyzed.
       By specifying a source path, any generated XML bug output will have
       complete source information, which allows later viewing in the
       GUI.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>home</literal></term>
    <listitem>
       <para>
       A required attribute.
       It must be set to the name of the directory where &FindBugs; is installed.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>quietErrors</literal></term>
    <listitem>
       <para>
       An optional boolean attribute.
       If true, reports of serious analysis errors and missing classes will
       be suppressed in the &FindBugs; output.  Default is false.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>reportLevel</literal></term>
    <listitem>
       <para>
       An optional attribute.  It specifies
       the priority threshold for reporting bugs.  If set to "low", all bugs are reported.
       If set to "medium" (the default), medium and high priority bugs are reported.
       If set to "high", only high priority bugs are reported.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>output</literal></term>
    <listitem>
       <para>
       Optional attribute.
       It specifies the output format.  If set to "xml" (the default), output
       is in XML format.
	   If set to "xml:withMessages", output is in XML format augmented with
	   human-readable messages.  (You should use this format if you plan
		to generate a report using an XSL stylesheet.)
		If set to "text", output is in ad-hoc text format.
       If set to "emacs", output is in <ulink url="http://www.gnu.org/software/emacs/">Emacs</ulink> error message format.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>sort</literal></term>
    <listitem>
       <para>
       Optional attribute.  If the <literal>output</literal> attribute
       is set to "text", then the <literal>sort</literal> attribute specifies
       whether or not reported bugs are sorted by class.  Default is true.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>outputFile</literal></term>
    <listitem>
       <para>
       Optional attribute.  If specified, names the output file in which the
       &FindBugs; output will be saved.  By default, the output is displayed
       directly by &Ant;.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>debug</literal></term>
    <listitem>
       <para>
      Optional boolean attribute.  If set to true, &FindBugs; prints diagnostic
      information about which classes are being analyzed, and which bug pattern
      detectors are being run.  Default is false.
       </para>
    </listitem>
  </varlistentry>
	
  <varlistentry>
	  <term><literal>effort</literal></term>
	  <listitem>
		  <para>
			  Set the analysis effort level.  The value specified should be
			  one of <literal>min</literal>, <literal>default</literal>,
			  or <literal>max</literal>.  See <xref linkend="commandLineOptions"/>
			  for more information about setting the analysis level.
		  </para>
	  </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>conserveSpace</literal></term>
    <listitem>
       <para>Synonym for effort="min".</para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>workHard</literal></term>
    <listitem>
       <para>Synonym for effort="max".</para>
    </listitem>
  </varlistentry>
	
  <varlistentry>
    <term><literal>visitors</literal></term>
    <listitem>
       <para>
       Optional attribute.  It specifies a comma-separated list of bug detectors
       which should be run.  The bug detectors are specified by their class names,
       without any package qualification.  By default, all detectors which are
       not disabled by default are run.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>omitVisitors</literal></term>
    <listitem>
       <para>
       Optional attribute.  It is like the <literal>visitors</literal> attribute,
       except it specifies detectors which will <emphasis>not</emphasis> be run.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>excludeFilter</literal></term>
    <listitem>
       <para>
       Optional attribute.  It specifies the filename of a filter specifying bugs
       to exclude from being reported.  See <xref linkend="filter" />.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>includeFilter</literal></term>
    <listitem>
       <para>
       Optional attribute.  It specifies the filename of a filter specifying
       which bugs are reported.  See <xref linkend="filter" />.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>projectFile</literal></term>
    <listitem>
       <para>
       Optional attribute.  It specifies the name of a project file.
       Project files are created by the &FindBugs; GUI, and specify classes,
       aux classpath entries, and source directories.  By naming a project,
       you don't need to specify any <literal>class</literal> elements,
       nor do you need to specify <literal>auxClasspath</literal> or
       <literal>sourcePath</literal> attributes.
       See <xref linkend="gui"/> for how to create a project.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>jvmargs</literal></term>
    <listitem>
       <para>
       Optional attribute.  It specifies any arguments that should be passed
       to the Java virtual machine used to run &FindBugs;.  You may need to
       use this attribute to specify flags to increase the amount of memory
       the JVM may use if you are analyzing a very large program.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>systemProperty</literal></term>
    <listitem>
      <para>
      Optional nested element.  If specified, defines a system property.
      The <literal>name</literal> attribute specifies the name of the
      system property, and the <literal>value</literal> attribute specifies
      the value of the system property.
      </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>timeout</literal></term>
    <listitem>
       <para>
       Optional attribute.  It specifies the amount of time, in milliseconds,
       that the Java process executing &FindBugs; may run before it is
       assumed to be hung and is terminated.  The default is 600,000
       milliseconds, which is ten minutes.  Note that for very large
       programs, &FindBugs; may require more than ten minutes to complete its 
       analysis.
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>failOnError</literal></term>
    <listitem>
       <para>
       Optional boolean attribute.  Whether to abort the build process if there is an 
       error running &FindBugs;. Defaults to "false"
       </para>
    </listitem>
  </varlistentry>

  <varlistentry>
    <term><literal>errorProperty</literal></term>
    <listitem>
       <para>
       Optional attribute which specifies the name of a property that
       will be set to "true" if an error occurs while running &FindBugs;.
       </para>
    </listitem>
  </varlistentry>
	
  <varlistentry>
	  <term><literal>warningsProperty</literal></term>
	  <listitem>
		  <para>
			  Optional attribute which specifies the name of a property
			  that will be set to "true" if any warnings are reported by
			  &FindBugs; on the analyzed program.
		  </para>
	  </listitem>
  </varlistentry>

</variablelist>


</para>

<!--

-->

</sect1>

</chapter>

<!--
   **************************************************************************
   Using the FindBugs Eclipse plugin
   **************************************************************************
-->

<chapter id="eclipse">
<title>Using the &FindBugs; Eclipse plugin</title>

<para>
The FindBugs Eclipse plugin allows &FindBugs; to be used within
the <ulink url="http://www.eclipse.org/">Eclipse</ulink> IDE.
The FindBugs Eclipse plugin was generously contributed by Peter Friese.
Phil Crosby and Andrei Loskutov contributed major improvements
to the plugin.
</para>

<sect1>
<title>Requirements</title>

<para>
To use the &FindBugs; Plugin for Eclipse, you need Eclipse 3.0.1 or later,
and JRE/JDK 1.4.0 or later.
</para>

</sect1>

<sect1>
<title>Installation</title>

<para>
Download the plugin from the following link:
<ulink url="@DOWNLOADS_WEBSITE@/de.tobject.findbugs_@ECLIPSE_UI_VERSION@.zip?download"
>@DOWNLOADS_WEBSITE@/de.tobject.findbugs_@ECLIPSE_UI_VERSION@.zip?download</ulink>.
Extract it in the directory in which you installed Eclipse.  This should be
the parent directory of the "plugins" directory within the Eclipse installation.

</para>

<para>
Once the plugin is extracted, start Eclipse and choose
<menuchoice>
  <guimenu>Help</guimenu>
  <guimenuitem>About Eclipse Platform</guimenuitem>
  <guimenuitem>Plug-in Details</guimenuitem>
</menuchoice>.
You should find a plugin called "FindBugs Plug-in" provided by "FindBugs Project".
</para>
</sect1>

<sect1>
<title>Using the Plugin</title>

<para>
To get started, right click on a Java project,
and select the option labeled "Find Bugs".
&FindBugs; will run, and problem markers (displayed in source
windows, and also in the Eclipse Problems view) will point to
locations in your code which have been identified as potential instances
of bug patterns.
</para>

<para>
You may customize how &FindBugs; runs by opening the Properties
dialog for a Java project, and choosing the "Findbugs" property page.
Options you may choose include:
</para>

<itemizedlist>
  <listitem>
    <para>
    Enable or disable the "Run FindBugs Automatically" checkbox.
    When enabled, FindBugs will run every time you modify a Java class
    within the project.
    </para>
  </listitem>

  <listitem>
    <para>
    Choose minimum warning priority and enabled bug categories.
    These options will choose which warnings are shown.
    For example, if you select the "Medium" warning priority,
    only Medium and High priority warnings will be shown.
    Similarly, if you uncheck the "Style" checkbox, no warnings
    in the Style category will be displayed.
    </para>
  </listitem>

  <listitem>
    <para>
    Select detectors.  The table allows you to select which detectors
    you want to enable for your project.
    </para>
  </listitem>
</itemizedlist>

</sect1>

<sect1>
<title>Troubleshooting</title>

<para>
The &FindBugs; Eclipse plugin is still experimental.&nbsp; This section
lists common problems with the plugin and (if known) how to resolve them.
</para>

<itemizedlist>
  <listitem>
    <para>
    If you do not see any &FindBugs; problem markers (in your source
    windows or in the Problems View), you may need to change your
    Problems View filter settings.  See
    <ulink url="http://findbugs.sourceforge.net/FAQ.html#q7">http://findbugs.sourceforge.net/FAQ.html#q7</ulink> for more information.
    </para>
  </listitem>

</itemizedlist>

</sect1>


</chapter>


<!--
   **************************************************************************
   Filter files
   **************************************************************************
-->

<chapter id="filter">
<title>Filter Files</title>

<para>
Filter files may be used to include or exclude bug reports for particular classes
and methods.  This chapter explains how to use filter files.

<note>
<title>Planned Features</title>
<para>
  Filters are currently only supported by the Command Line interface.
  Eventually, filter support will be added to the GUI.
</para>
</note>
</para>


<sect1>
<title>Introduction to Filter Files</title>

<para>
Conceptually, a filter matches bug instances against a set of criteria.
By defining a filter, you can select bug instances for special treatment;
for example, to exclude or include them in a report.
</para>

<para>
A filter file is an <ulink url="http://www.w3.org/XML/">XML</ulink> document with a top-level <literal>FindBugsFilter</literal> element
which has some number of <literal>Match</literal> elements as children.  Each <literal>Match</literal>
element represents a predicate which is applied to generated bug instances.
Usually, a filter will be used to exclude bug instances.  For example:

<screen>
<prompt>$ </prompt><command>findbugs -textui -exclude <replaceable>myExcludeFilter.xml</replaceable> <replaceable>myApp.jar</replaceable></command>
</screen>

However, a filter could also be used to select bug instances to specifically
report:

<screen>
<prompt>$ </prompt><command>findbugs -textui -include <replaceable>myIncludeFilter.xml</replaceable> <replaceable>myApp.jar</replaceable></command>
</screen>
</para>

<para>
<literal>Match</literal> elements have <literal>class</literal> and <literal>classregex</literal>
attributes specifying what class or classes the predicate applies to.
The <literal>class</literal> attribute specifies the name of a class.
The <literal>classregex</literal> attribute specifies a regular expression
applied to class names of bug instances.  The regular expression is
used to create a <literal>java.util.regex.Pattern</literal> object,
which does the matching.
<literal>Match</literal> elements contain children, which are conjuncts of the predicate.
In other words, each of the children must be true for the predicate to be true.
</para>

</sect1>

<sect1>
<title>Types of Match clauses</title>

<variablelist>
 <varlistentry>
   <term><literal>&lt;BugCode&gt;</literal></term>
   <listitem><para>
    This element specifies abbreviations of bugs.
   The <literal>name</literal> attribute is a comma-seperated list of abbreviations.
   </para></listitem>
 </varlistentry>
 
 <varlistentry>
	<term><literal>&lt;BugPattern&gt;</literal></term>
	<listitem>
		<para>
			This element specifies a particular bug pattern or bug patterns to match.
			The <literal>name</literal> attribute is a comma-separated list of
			bug pattern types.  You can find the bug pattern types for particular
			warnings by looking at the output produced by the <command>-xml</command>
			output option (the <literal>type</literal> attribute of <literal>BugInstance</literal>
			elements), or from the <ulink url="../bugDescriptions.html">bug
			descriptions document</ulink>.
		</para>
	</listitem>
 </varlistentry>
 
 <varlistentry>
	<term><literal>&lt;Priority&gt;</literal></term>
	<listitem>
		<para>
			This element matches warnings with a particular priority.
			The <literal>value</literal> attribute should be an integer value:
			1 to match high-priority warnings, 2 to match medium-priority warnings,
			or 3 to match low-priority warnings.
		</para>
	</listitem>
 </varlistentry>

 <varlistentry>
   <term><literal>&lt;Method&gt;</literal></term>

   <listitem><para>This element specifies a method.  The <literal>name</literal> attribute is the name
   of the method.  The <literal>params</literal> attribute is a comma separated list
   of the types of the method's parameters.  The <literal>returns</literal> attribute is
   the method's return type.  In <literal>params</literal> and <literal>returns</literal>, class names
   must be fully qualified.  (E.g., "java.lang.String" instead of just
   "String".)  Note that <literal>params</literal> and <literal>returns</literal> are optional; you can
   just specify <literal>name</literal>, and the clause will match all methods with
   that name.  However, if you specify either <literal>params</literal> or <literal>returns</literal>,
   you must specify both of them.
   </para></listitem>
 </varlistentry>

 <varlistentry>
   <term><literal>&lt;Or&gt;</literal></term>
    <listitem><para>
   This element combines <literal>Match</literal> clauses as disjuncts.  I.e., you can put two
   <literal>Method</literal> elements in an <literal>Or</literal> clause in order match either method.
   </para></listitem>
 </varlistentry>
</variablelist>

</sect1>

<sect1>
<title>Caveats</title>

<para>
<literal>Match</literal> clauses can only match information that is actually contained in the
bug instances.  Every bug instance has a class, so in general, excluding
bugs by class will work.
</para>

<para>
Some bug instances have two (or more) classes.  For example, the DE (dropped exception)
bugs report both the class containing the method where the dropped exception
happens, and the class which represents the type of the dropped exception.
Only the <emphasis>first</emphasis> (primary) class is matched against <literal>Match</literal> clauses.
So, for example, if you want to suppress IC (initialization circularity)
reports for classes "com.foobar.A" and "com.foobar.B", you would use
two <literal>Match</literal> clauses:

<programlisting>
   &lt;Match class="com.foobar.A"&gt;
      &lt;BugCode name="IC" /&gt;
   &lt;/Match&gt;

   &lt;Match class="com.foobar.B"&gt;
      &lt;BugCode name="IC" /&gt;
   &lt;/Match&gt;
</programlisting>

By explicitly matching both classes, you ensure that the IC bug instance will be
matched regardless of which class involved in the circularity happens to be
listed first in the bug instance.  (Of course, this approach might accidentally
supress circularities involving "com.foobar.A" or "com.foobar.B" and a third
class.)
</para>

<para>
Many kinds of bugs report what method they occur in.  For those bug instances,
you can put <literal>Method</literal> clauses in the <literal>Match</literal> element and they should work
as expected.
</para>

</sect1>

<sect1>
<title>Examples</title>

<para>
  1. Match all bug reports for a class.

<programlisting>
     &lt;Match class="com.foobar.MyClass" /&gt;
</programlisting>

</para>

<para>
  2. Match certain tests from a class by specifying their abbreviations.
<programlisting>
     &lt;Match class="com.foobar.MyClass"&gt;
       &lt;BugCode name="DE,UrF,SIC" /&gt;
     &lt;/Match&gt;
</programlisting>
</para>

<para>
  3. Match certain tests from all classes by specifying their abbreviations.

<programlisting>
     &lt;Match classregex=".*" &gt;
       &lt;BugCode name="DE,UrF,SIC" /&gt;
     &lt;/Match&gt;
</programlisting>
</para>

<para>
  4. Match bug types from specified methods of a class by their abbreviations.

<programlisting>
     &lt;Match class="com.foobar.MyClass"&gt;
       &lt;Or&gt;
         &lt;Method name="frob" params="int,java.lang.String" returns="void" /&gt;
         &lt;Method name="blat" params="" returns="boolean" /&gt;
       &lt;/Or&gt;
       &lt;BugCode name="DC" /&gt;
     &lt;/Match&gt;
</programlisting>
</para>

<para>
	5. Match a particular bug pattern in a particular method.
	
<programlisting>
<![CDATA[
    <!-- A method with an open stream false positive. -->
    <Match class="com.foobar.MyClass">
      <Method name="writeDataToFile"/>
      <BugPattern name="OS_OPEN_STREAM"/>
    </Match>
]]>
</programlisting>
</para>

<para>
	6. Match a particular bug pattern with a given priority in a particular method.
	
<programlisting>
<![CDATA[
    <!-- A method with a dead local store false positive (medium priority). -->
    <Match class="com.foobar.MyClass">
      <Method name="someMethod"/>
      <BugPattern name="DLS_DEAD_LOCAL_STORE"/>
      <Priority value="2"/>
    </Match>
]]>
</programlisting>
</para>

</sect1>

<sect1>
<title>Complete Example</title>

<programlisting>

&lt;FindBugsFilter&gt;
     &lt;Match class="com.foobar.ClassNotToBeAnalyzed" /&gt;

     &lt;Match class="com.foobar.ClassWithSomeBugsMatched"&gt;
       &lt;BugCode name="DE,UrF,SIC" /&gt;
     &lt;/Match&gt;

     &lt;!-- Match all XYZ violations. --&gt;
     &lt;Match classregex=".*" &gt;
       &lt;BugCode name="XYZ" /&gt;
     &lt;/Match&gt;

     &lt;!-- Match all doublecheck violations in these methods of "AnotherClass". --&gt;
     &lt;Match class="com.foobar.AnotherClass"&gt;
       &lt;Or&gt;
         &lt;Method name="nonOverloadedMethod" /&gt;
         &lt;Method name="frob" params="int,java.lang.String" returns="void" /&gt;
         &lt;Method name="blat" params="" returns="boolean" /&gt;
       &lt;/Or&gt;
       &lt;BugCode name="DC" /&gt;
     &lt;/Match&gt;

<![CDATA[
     <!-- A method with a dead local store false positive (medium priority). -->
     <Match class="com.foobar.MyClass">
       <Method name="someMethod"/>
       <BugPattern name="DLS_DEAD_LOCAL_STORE"/>
       <Priority value="2"/>
     </Match>
]]>
&lt;/FindBugsFilter&gt;
</programlisting>

</sect1>


</chapter>


<!--
   **************************************************************************
   Analysis properties
   **************************************************************************
-->

<chapter id="analysisprops">
<title>Analysis Properties</title>

<para>
&FindBugs; allows several aspects of the analyses it performs to be
customized.  System properties are used to configure these options.
This chapter describes the configurable analysis options.
</para>

<para>
The analysis options have two main purposes.  First, they allow you
to inform &FindBugs; about the meaning of methods in your application,
so that it can produce more accurate results, or produce fewer
false warnings.  Second, they allow you to configure the precision
of the analysis performed.  Reducing analysis precision can save
memory and analysis time, at the expense of missing some real bugs,
or producing more false warnings.
</para>

<para>
The analysis options are set using the <command>-property</command>
command line option.  For example:
<screen>
<prompt>$ </prompt><command>findbugs -textui -property "cfg.noprune=true" <replaceable>myApp.jar</replaceable></command>
</screen>
</para>

<para>
The list of configurable analysis properties is shown in
<xref linkend="analysisproptable"/>.
</para>

<table id="analysisproptable">
<title>Configurable Analysis Properties</title>
<tgroup cols="3" align="left">
  <thead>
    <row>
      <entry>Property Name</entry>
      <entry>Value</entry>
      <entry>Meaning</entry>
    </row>
  </thead>
  <tbody>
<!--
    <row>
      <entry>cfg.noprune</entry>
      <entry>true or false</entry>
      <entry>If true, infeasible exception edges are not pruned from
      the control flow graphs of analyzed methods.  This option
      increases the speed of the analysis (by about 20%-30%),
      but causes some detectors to produce more false warnings.</entry>
    </row>
-->
    <row>
      <entry>findbugs.assertionmethods</entry>
      <entry>Comma separated list of fully qualified method names:
      e.g., "com.foo.MyClass.checkAssertion"</entry>
      <entry>This property specifies the names of methods that are used
      to check program assertions.  Specifying these methods allows
      the null pointer dereference bug detector to avoid reporting
      false warnings for values which are checked by assertion
      methods.</entry>
    </row>
    <row>
      <entry>findbugs.refcomp.reportAll</entry>
      <entry>true or false</entry>
      <entry>If true, all suspicious reference comparisons
      using the == and != operators are reported.&nbsp; If false,
      only one such warning is issued per method.&nbsp; Default
      is false.</entry>
    </row>
    <row>
      <entry>findbugs.maskedfields.locals</entry>
      <entry>true or false</entry>
      <entry>If true, emit low priority warnings for local variables
      which obscure fields.  Default is false.</entry>
    </row>
    <row>
      <entry>findbugs.nullderef.assumensp</entry>
      <entry>true or false</entry>
      <entry>If true, the null dereference detector assumes that any
      reference value returned from a method or passed to a method
      in a parameter might be null.  Default is false.  Note that
      enabling this property will very likely cause a large number
      of false warnings to be produced.</entry>
    </row>
    <row>
      <entry>findbugs.sf.comment</entry>
      <entry>true or false</entry>
      <entry>If true, the SwitchFallthrough detector will only report
      warnings for cases where the source code does not have a comment
      containing the words "fall" or "nobreak".  (An accurate source
      path must be used for this feature to work correctly.)
      This helps find cases where the switch fallthrough is likely
      to be unintentional.</entry>
    </row>
    <row>
      <entry>findbugs.de.comment</entry>
      <entry>true or false</entry>
      <entry>If true, the DroppedException detector scans source code
      for empty catch blocks for a comment, and if found, does not
      report a warning.</entry>
    </row>
<!--
    <row>
      <entry></entry>
      <entry></entry>
      <entry></entry>
    </row>
-->
  </tbody>
</tgroup>
</table>

</chapter>


<!--
   **************************************************************************
   License
   **************************************************************************
-->

<chapter id="license">
<title>License</title>

<para>
FindBugs is free software distributed under the terms of the
<ulink url="http://www.gnu.org/licenses/lgpl.html">Lesser GNU Public License</ulink>.
You should have received a copy of the license in the file <filename>LICENSE.txt</filename>
in the &FindBugs; distribution.
</para>

<para>
You can find the latest version of FindBugs, along with its source code, from the
<ulink url="@WEBSITE@">FindBugs web page</ulink>.
</para>

</chapter>


<!--
   **************************************************************************
   Acknowledgments
   **************************************************************************
-->
<chapter id="acknowledgments">
<title>Acknowledgments</title>

<sect1>
<title>Contributors</title>

<para>&FindBugs; was originally written by Bill Pugh (<email>pugh@cs.umd.edu</email>).
David Hovemeyer (<email>daveho@cs.umd.edu</email>) implemented some of the
detectors, added the Swing GUI, and is a co-maintainer.</para>

<para>Mike Fagan (<email>mfagan@tde.com</email>) contributed the &Ant; build script,
the &Ant; task, and several enhancements and bug fixes to the GUI.</para>

<para>Germano Leichsenring contributed Japanese translations of the bug
summaries.</para>

<para>David Li contributed the Emacs bug report format.</para>

<para>Peter D. Stout contributed recursive detection of Class-Path
attributes in analyzed Jar files, German translations of
text used in the Swing GUI, and other fixes.</para>

<para>Peter Friese wrote the &FindBugs; Eclipse plugin.</para>

<para>Rohan Lloyd contributed several Mac OS X enhancements,
bug detector improvements,
and maintains the Fink package for &FindBugs;.</para>

<para>Hiroshi Okugawa translated the &FindBugs; manual and
more of the bug summaries into Japanese.</para>

<para>Phil Crosby enhanced the Eclipse plugin to add a view
to display the bug details.</para>

<para>Dave Brosius fixed a number of bugs, added user preferences
to the Swing GUI, improved several bug detectors, and
contributed the string concatenation detector.</para>

<para>Thomas Klaeger contributed a number of bug fixes and
bug detector improvements.</para>

<para>Andrei Loskutov made a number of improvements to the
Eclipse plugin.</para>

<para>Brian Goetz contributed a major refactoring of the
visitor classes to improve readability and understandability.</para>

<para> Pete Angstadt fixed several problems in the Swing GUI.</para>

<para>Francis Lalonde provided a task resource file for the
FindBugs Ant task.</para>

<para>Garvin LeClaire contributed support for output in
Xdocs format, for use by Maven.</para>

<para>Holger Stenzhorn contributed improved German translations of items
in the Swing GUI.</para>

<para>Juha Knuutila contributed Finnish translations of items
in the Swing GUI.</para>

<para>Tanel Lebedev contributed Estonian translations of items
in the Swing GUI.</para>

<para>Hanai Shisei contributed full Japanese translations of
bug messages, and text used in the Swing GUI.</para>

<para>David Cotton contributed Fresh translations for bug
messages and for the Swing GUI.</para>

<para>Michael Tamm contributed support for the "errorProperty" attribute
in the Ant task.</para>

<para>Thomas Kuehne improved the German translation of the Swing GUI.</para>

<para>Len Trigg improved source file support for the Emacs output mode.</para>

<para>Greg Bentz provided a fix for the hashcode/equals detector.</para>

<para>K. Hashimoto contributed internationalization fixes and several other
	bug fixes.</para>

<para>
	Glenn Boysko contributed support for ignoring specified local
	variables in the dead local store detector.
</para>
	
<para>
	Jay Dunning contributed a detector to find equality comparisons
	of floating-point values, and overhauled the analysis summary
	report and its representation in the saved XML format.
</para>

<para>
	Olivier Parent contributed updated French translations for bug descriptions and
	Swing GUI.
</para>

<para>
	Chris Nappin contributed the <filename>plain.xsl</filename>
	stylesheet.
</para>

<para>
	Etienne Giraudy contributed the <filename>fancy.xsl</filename>
	stylesheet, and made improvements to the <command>-xml:withMessages</command>
	option.
</para>
	
<para>
	Takashi Okamoto fixed bugs in the project preferences dialog
	in the Eclipse plugin.
</para>
	
<para>Thomas Einwaller fixed bugs in the project preferences dialog in the Eclipse plugin.</para>
	
<para>Jeff Knox contributed support for the warningsProperty attribute
in the Ant task.</para>

<para>If you have contributed to &FindBugs;, but aren't mentioned above,
please send email to <email>daveho@cs.umd.edu</email> (and also accept
our humble apologies).</para>

</sect1>

<sect1>
<title>Software Used</title>

<para>&FindBugs; uses several open-source software packages, without which its
development would have been much more difficult.</para>

<sect2>
<title>BCEL</title>
<para>&FindBugs; includes software developed by the Apache Software Foundation
(<ulink url="http://www.apache.org/">http://www.apache.org/</ulink>).
Specifically, it uses the <ulink url="http://jakarta.apache.org/bcel/">Byte Code
Engineering Library</ulink>.</para>
</sect2>

<sect2>
<title>DOM4J</title>
<para>&FindBugs; uses <ulink url="http://dom4j.org">DOM4J</ulink>, which is
distributed under the following license:</para>

<blockquote>
<para>
Copyright 2001 (C) MetaStuff, Ltd. All Rights Reserved. 
</para>

<para>
Redistribution and use of this software and associated documentation
("Software"), with or without modification, are permitted provided that
the following conditions are met:
</para>

<orderedlist numeration="arabic">
   <listitem><para>
   Redistributions of source code must retain copyright statements and
   notices. Redistributions must also contain a copy of this document.
  </para></listitem>
   <listitem><para>
   Redistributions in binary form must reproduce the above copyright
   notice, this list of conditions and the following disclaimer in the
   documentation and/or other materials provided with the distribution.
  </para></listitem>
   <listitem><para>
   The name "DOM4J" must not be used to endorse or promote products
   derived from this Software without prior written permission
   of MetaStuff, Ltd. For written permission, please contact
   <email>dom4j-info@metastuff.com</email>.
  </para></listitem>
   <listitem><para>
   Products derived from this Software may not be called "DOM4J" nor may
   "DOM4J" appear in their names without prior written permission of
   MetaStuff, Ltd. DOM4J is a registered trademark of MetaStuff, Ltd.
  </para></listitem>
   <listitem><para>
   Due credit should be given to the DOM4J Project (<ulink url="http://dom4j.org/">http://dom4j.org/</ulink>).
  </para></listitem>
</orderedlist>

<para>
THIS SOFTWARE IS PROVIDED BY METASTUFF, LTD. AND CONTRIBUTORS ``AS IS''
AND ANY EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL METASTUFF, LTD. OR ITS
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</para>
</blockquote>

</sect2>

</sect1>

</chapter>


</book>
